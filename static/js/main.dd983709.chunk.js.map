{"version":3,"sources":["Components/Footer.js","Components/Header.js","Components/Alert.js","Components/BasketItem.js","Components/BasketList.js","Components/Cart.js","Components/TagsRarity.js","Components/GoodsItem.js","Components/GoodsList.js","Components/Preloader.js","Components/Shop.js","config.js","App.js","index.js"],"names":["Footer","className","id","Date","getFullYear","href","target","rel","Header","onClick","e","preventDefault","Alert","name","closeAlert","toastOut","useRef","timerId","ww","window","innerWidth","useEffect","length","current","setTimeout","document","querySelector","classList","add","clearTimeout","map","t","ind","style","top","BasketItem","price","quantity","removeBasket","changeQuantity","data-basketid","BasketList","order","isBasketShow","handleBasketShow","totalPrice","reduce","sum","el","remove","item","index","String","Cart","TagsRarity","rarity","value","Uncommon","color","Rare","Epic","Legendary","GoodsItem","props","desc","img","addToBasket","defaultImg","Math","floor","random","src","alt","onError","fontWeight","marginBottom","fontSize","GoodsList","goods","granted","i","description","finalPrice","images","full_background","Preloader","Shop","useState","setGoods","loading","setLoading","setOrder","setBasketShow","alertName","setAlertName","localStorage","getItem","JSON","parse","fetch","headers","process","then","response","ok","json","Promise","reject","data","shop","catch","error","alert","itemIndex","findIndex","orderItem","newItem","setItem","stringify","newOrder","now","filter","newOrderLS","sign","slice","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dd983709.chunk.js","sourcesContent":["const Footer = () => {\r\n    return (\r\n        <footer className=\"page-footer light-blue accent-1\" id=\"keks\">\r\n            <div className=\"footer-copyright\">\r\n                <div className=\"container\">\r\n                    © {new Date().getFullYear()} Copyright Text\r\n                    <a className=\"grey-text text-lighten-4 right\" href=\"https://github.com/Ksooft\" target=\"_blank\" rel=\"noopener noreferrer\">Github</a>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer\r\n","const Header = () => {\r\n\r\n    return (\r\n        <nav className=\"light-blue accent-2\">\r\n            <div className=\"nav-wrapper\">\r\n                <a href=\"/\" className=\"brand-logo\" onClick={e => e.preventDefault()}>Shop</a>\r\n                <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n                    <li><a href=\"https://github.com/Ksooft\" target=\"_blank\" rel=\"noopener noreferrer\">Github</a></li>\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n\r\n    )\r\n}\r\n\r\nexport default Header\r\n","import { useEffect, useRef } from 'react'\r\n\r\nconst Alert = ({ name, closeAlert }) => {\r\n    const toastOut = useRef()\r\n    const timerId = useRef()\r\n    const ww = window.innerWidth\r\n    useEffect(() => {\r\n        if (name.length < 5) {\r\n            toastOut.current = setTimeout(() => {\r\n                document.querySelector('#toast-container').classList.add('close')\r\n            }, 2800);\r\n            timerId.current = setTimeout(closeAlert, 3000)\r\n        } else {\r\n            document.querySelector('#toast-container').classList.add('close')\r\n            setTimeout(closeAlert, 200)\r\n        }\r\n        \r\n        return () => {\r\n            clearTimeout(toastOut.current)\r\n            clearTimeout(timerId.current)\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [name])\r\n\r\n    \r\n    return (\r\n        <div className=\"toast-block\">\r\n            {name.map((t, ind) => <div key={t.id} id=\"toast-container\" style={{top: `${ww <= 400 ? ind * 80 : ind * 60}px`}}>\r\n                    <div className=\"toast\">{t.name} добавлен в корзину!</div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Alert\r\n","const BasketItem = ({ id, name, price, quantity, removeBasket, changeQuantity }) => {\r\n    return (\r\n        <li className=\"collection-item\" data-basketid={price + quantity + id}>\r\n            {name} <i className=\"material-icons basket-quantity red-text\" onClick={() => changeQuantity({ id, price, quantity }, '-')}>remove</i>{' '}\r\n                x{quantity} <i className=\"material-icons basket-quantity green-text\" onClick={() => changeQuantity({ id, price, quantity }, '+')}>add</i> = {price * quantity} \r\n            <span className=\"secondary-content\" onClick={() => removeBasket({id, price, quantity})}>\r\n                <i className=\"material-icons\">close</i>\r\n            </span>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default BasketItem\r\n","import BasketItem from './BasketItem'\r\n\r\nconst BasketList = ({ order = [], isBasketShow, handleBasketShow, removeBasket, changeQuantity }) => {\r\n    const totalPrice = order.reduce((sum, el) => sum + el.price * el.quantity, 0)\r\n\r\n    const closeBasket = () => {\r\n        document.querySelector('.modal-shop.open').classList.add('close')\r\n        document.querySelector('.modal-shop.open').classList.remove('open')\r\n        setTimeout(() => {\r\n            document.querySelector('.modal-shop .collection').classList.add('hide')\r\n            handleBasketShow()\r\n            setTimeout(() => document.querySelector('.modal-shop .collection').classList.remove('hide'), 350);\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n        <div className={`modal-shop${isBasketShow ? \" open\" : \"\"}`}>\r\n            <ul className=\"collection\">\r\n                <li className=\"collection-item active\">Корзина <span className=\"secondary-content\" onClick={closeBasket}><i className=\"material-icons\">close</i></span></li>\r\n                {order.length ? order.map((item, index) => <BasketItem key={item.id + String(index)} {...item} removeBasket={removeBasket} changeQuantity={changeQuantity} />) : <li className=\"collection-item\">Корзина пуста</li>}\r\n                <li className=\"collection-item active\">Общая стоимость: {totalPrice}</li>\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BasketList\r\n","const Cart = ({ quantity = 0, handleBasketShow }) => {\r\n    return (\r\n        <div className=\"cart light-blue accent-2 white-text\" onClick={handleBasketShow}>\r\n            <i className=\"material-icons\">shopping_cart</i>\r\n            { quantity ? <span className=\"cart-quantity\">{quantity}</span> : '' }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart\r\n","const TagsRarity = ({ rarity }) => { // Epic, Uncommon, Rare, Legendary\r\n    const value = {\r\n        Uncommon: { name: 'Необычный', color: 'green' },\r\n        Rare: { name: 'Редкий', color: 'blue darken-4' },\r\n        Epic: { name: 'Эпический', color: 'purple' },\r\n        Legendary: { name: 'Легендарный', color: 'orange' }\r\n    }\r\n    return (\r\n        <div className={`chip right card-rarity ${value[rarity].color}`}>\r\n            {value[rarity].name}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TagsRarity\r\n","import TagsRarity from './TagsRarity'\r\n\r\nconst GoodsItem = (props) => {\r\n    const {desc, name, id, price, img, rarity, addToBasket} = props\r\n    const colors = ['3D217A', 'F04482', 'BFA499', 'C27643', '91C0CB', '82CD99', 'F57A16', '6B566B', '0FD1E6', '6AFC17', 'C1BE3A', 'FCF9A4', '002FB1', 'F57060', '8184E6']\r\n    const randomColors = () => Math.floor(0 + Math.random() * (14 + 1 - 0))\r\n    const defaultImg = `https://dummyimage.com/1024/${colors[randomColors()]}/ffffff.png&text=${name}`\r\n    return (\r\n        <div className=\"card\" id={id}>\r\n            <div className=\"card-image\">\r\n                <img src={img} alt={name} onError={e => e.target.src = defaultImg} />\r\n            </div>\r\n            <div className=\"card-content\">\r\n                <span className=\"card-title\" style={{ fontWeight: 400}}>{name}</span>\r\n                <p style={{marginBottom: '15px'}}>{desc}</p>\r\n                <TagsRarity rarity={rarity} />\r\n            </div>\r\n            <div className=\"card-action\">\r\n                <button className=\"btn\" onClick={() => addToBasket({id, name, price})}>Купить</button>\r\n                <span className=\"right\" style={{ fontSize: '1.8rem' }}>{price} руб.</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GoodsItem\r\n","import GoodsItem from './GoodsItem'\r\n\r\nconst GoodsList = ({ goods = [], addToBasket }) => {\r\n\r\n    if (!goods.length) {\r\n        return <h2 className=\"red-text\">Nothing found!</h2>\r\n    }\r\n\r\n    return (\r\n        <div className=\"goods\">\r\n            {goods.map(item => item.granted.map(i => <GoodsItem key={i.id} desc={i.description}\r\n                    name={i.name} id={i.id} price={item.price.finalPrice}\r\n                    img={i.images.full_background} rarity={i.rarity.id} addToBasket={addToBasket} /> ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GoodsList\r\n","const Preloader = () => {\r\n    return (\r\n        <div className=\"progress light-blue lighten-4\">\r\n            <div className=\"indeterminate light-blue accent-2\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader\r\n","import { useState, useEffect } from 'react'\r\nimport { API_KEY, API_URL } from '../config'\r\nimport Alert from './Alert'\r\nimport BasketList from './BasketList'\r\nimport Cart from './Cart'\r\nimport GoodsList from './GoodsList'\r\nimport Preloader from './Preloader'\r\n\r\nconst Shop = () => {\r\n    const [goods, setGoods] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [order, setOrder] = useState([])\r\n    const [isBasketShow, setBasketShow] = useState(false)\r\n    const [alertName, setAlertName] = useState([])\r\n\r\n    const addToBasket = item => {\r\n        const itemIndex = order.findIndex(orderItem => orderItem.id === item.id && orderItem.price === item.price)\r\n\r\n        if (itemIndex < 0) {\r\n            const newItem = {\r\n                ...item,\r\n                quantity: 1\r\n            }\r\n            setOrder([...order, newItem])\r\n            localStorage.setItem('orders', JSON.stringify([...order, newItem]))\r\n        } else {\r\n            const newOrder = order.map((orderItem, index) => {\r\n                if (itemIndex === index) {\r\n                    return {\r\n                        ...orderItem,\r\n                        quantity: orderItem.quantity + 1\r\n                    }\r\n                } else {\r\n                    return orderItem\r\n                }\r\n            })\r\n            setOrder(newOrder)\r\n            localStorage.setItem('orders', JSON.stringify(newOrder))\r\n        }\r\n        \r\n        setAlertName([...alertName, {name: item.name, id: item.id + Date.now()}])\r\n    }\r\n\r\n    const removeFromBasket = item => {\r\n        setTimeout(() => {\r\n            document.querySelector(`.collection-item[data-basketid=\"${item.price + item.quantity + item.id}\"`).classList.remove('delete')\r\n            // eslint-disable-next-line\r\n            setOrder(order.filter(orderItem => orderItem.id !== item.id || orderItem.id === item.id && orderItem.price !== item.price))\r\n            const orderFromLS = JSON.parse(localStorage.getItem('orders'))\r\n            // eslint-disable-next-line\r\n            const newOrderLS = orderFromLS.filter(orderItem => orderItem.id !== item.id || orderItem.id === item.id && orderItem.price !== item.price)\r\n            localStorage.setItem('orders', JSON.stringify(newOrderLS))\r\n        }, 400);\r\n        document.querySelector(`.collection-item[data-basketid=\"${item.price + item.quantity + item.id}\"`).classList.add('delete')\r\n    }\r\n\r\n    const handleBasketShow = () => setBasketShow(!isBasketShow)\r\n\r\n    const changeQuantity = (item, sign) => {\r\n        const newOrder = order.map(orderItem => {\r\n            if (item.quantity === 1 && sign === '-' && orderItem.id === item.id) {\r\n                alert('Количество товара не может быть меньше одного')\r\n                return orderItem\r\n            }\r\n            if (orderItem.id === item.id && orderItem.price === item.price) {\r\n                return {\r\n                    ...orderItem,\r\n                    quantity: sign === '+' ? orderItem.quantity + 1 : orderItem.quantity - 1\r\n                }\r\n            }\r\n            return orderItem\r\n        })\r\n        setOrder(newOrder)\r\n        localStorage.setItem('orders', JSON.stringify(newOrder))\r\n    }\r\n\r\n    const closeAlert = () => setAlertName(alertName.slice(1))\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('orders')) {\r\n            setOrder(JSON.parse(localStorage.getItem('orders')))\r\n        }\r\n        fetch(API_URL, {\r\n            headers: {\r\n                'Authorization': API_KEY\r\n            }\r\n        })\r\n            .then(response => response.ok ? response.json() : Promise.reject(response))\r\n            .then(data => {\r\n                setGoods(data.shop)\r\n                setLoading(false)\r\n            })\r\n            .catch(error => alert(error))\r\n    }, [])\r\n\r\n    return (\r\n        <main className=\"container content\">\r\n            <Cart quantity={order.length} handleBasketShow={handleBasketShow} />\r\n            { loading ? <Preloader /> : <GoodsList goods={goods} addToBasket={addToBasket} /> }\r\n            <BasketList order={order} isBasketShow={isBasketShow} \r\n                handleBasketShow={handleBasketShow} removeBasket={removeFromBasket} changeQuantity={changeQuantity} />\r\n            {alertName.length ? <Alert name={alertName} closeAlert={closeAlert} /> : ''}\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default Shop\r\n","const API_KEY = process.env.REACT_APP_API_KEY\r\n\r\nconst API_URL = 'https://fortniteapi.io/v2/shop?lang=ru'\r\n\r\nexport {\r\n    API_KEY,\r\n    API_URL\r\n}","import './App.css'\nimport Footer from './Components/Footer'\nimport Header from './Components/Header'\nimport Shop from './Components/Shop';\n\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <Shop />\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}